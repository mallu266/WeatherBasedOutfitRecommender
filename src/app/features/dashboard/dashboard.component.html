<section>
    <div class="title">
        <h1>Weather-Based Outfit Recommender</h1>
        <div class="user-menu">
            <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="User menu">
                <mat-icon>account_circle</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
                <button mat-menu-item (click)="logout()">
                    <mat-icon>logout</mat-icon>
                    <span>Logout & Clear Memory</span>
                </button>
            </mat-menu>
        </div>
    </div>
    <mat-grid-list [cols]="cols" rowHeight="250px" gutterSize="20px">
        <!-- Loading Indicator -->
        <mat-grid-tile [colspan]="cols" *ngIf="isLoading">
            <mat-card>
                <p>Loading weather data...</p>
            </mat-card>
        </mat-grid-tile>

        <!-- First row: 2 columns, each colspan 2 (so each takes the full width, stacked) -->
        <mat-grid-tile [colspan]="appSearch">
            <app-search (searchResult)="searchResult($event)"></app-search>
        </mat-grid-tile>
        <!-- Second row: 2 columns -->
        <mat-grid-tile [colspan]="appResult">
            <app-result [weather]="weather"></app-result>
        </mat-grid-tile>
        <mat-grid-tile [colspan]="appRecomandation">
            <app-recomandation [weather]="weather"></app-recomandation>
        </mat-grid-tile>
        <!-- Third row: 1 column, colspan 2 -->
        <mat-grid-tile [colspan]="appHistory">
            <app-history [history]="history" (select)="showRecommendationPopup($event)"></app-history>
        </mat-grid-tile>
    </mat-grid-list>
</section>